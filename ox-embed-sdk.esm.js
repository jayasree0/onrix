var e={HANDSHAKE_REPLY:"HANDSHAKE_REPLY",READY:"READY",SCENE_LOAD_START:"SCENE_LOAD_START",SCENE_LOAD_END:"SCENE_LOAD_END",SCENE_LOST:"SCENE_LOST",SCENE_RADIUS_ENTER:"SCENE_RADIUS_ENTER",SCENE_RADIUS_EXIT:"SCENE_RADIUS_EXIT",ELEMENT_CLICK:"ELEMENT_CLICK",OPEN_MARKERS_PANEL:"OPEN_MARKERS_PANEL",CLOSE_MARKERS_PANEL:"CLOSE_MARKERS_PANEL"},E={HANDSHAKE:"HANDSHAKE",DISCONNECT:"DISCONNECT",ENABLE_ELEMENT:"ENABLE_ELEMENT",DISABLE_ELEMENT:"DISABLE_ELEMENT",TOGGLE_ELEMENT:"TOGGLE_ELEMENT",ENABLE_ALL:"ENABLE_ALL",DISABLE_ALL:"DISABLE_ALL",PLAY:"PLAY",PAUSE:"PAUSE",TRANSLATE_ELEMENT:"TRANSLATE_ELEMENT",ROTATE_ELEMENT:"ROTATE_ELEMENT",SCALE_ELEMENT:"SCALE_ELEMENT",SET_ELEMENT_POSITION:"SET_ELEMENT_POSITION",SET_ELEMENT_ROTATION:"SET_ELEMENT_ROTATION",SET_ELEMENT_SCALE:"SET_ELEMENT_SCALE",PLAY_ANIMATION:"PLAY_ANIMATION",STOP_ANIMATION:"STOP_ANIMATION",RESET:"RESET",SET_LABEL_TEXT:"SET_LABEL_TEXT"},t=function(){function e(){this.eventListeners={},this.eventListenersCount=0}var E=e.prototype;return E.addEventListener=function(e,E){this.eventListeners[e]||(this.eventListeners[e]=[]);var t=this.eventListenersCount++;return this.eventListeners[e].push({id:t,func:E}),t},E.triggerEvent=function(e,E){this.eventListeners[e]&&this.eventListeners[e].map(function(e){return e.func(E)})},E.removeEventListener=function(e){for(var E=0,t=Object.keys(this.eventListeners);E<t.length;E++)for(var n=t[E],i=0;i<n.length;i++)if(n[i].id===e){n.splice(i,1);break}},e}(),n=function(){function n(e,E){void 0===E&&(E="https://studio.onirix.com"),this.targetWindow=e?e.contentWindow:window,this.onirixHost=E,this.eventManager=new t,this.onMessageReceived=this.onMessageReceived.bind(this)}var i=n.prototype;return i.connect=function(){try{var e=this,t=new Promise(function(E,t){e.resolveConnect=E});return window.addEventListener("message",e.onMessageReceived),e.sendMessage(E.HANDSHAKE),Promise.resolve(t).then(function(){})}catch(e){return Promise.reject(e)}},i.disconnect=function(){try{return this.sendMessage(E.DISCONNECT),window.removeEventListener("message",this.onMessageReceived),Promise.resolve()}catch(e){return Promise.reject(e)}},i.sendMessage=function(e,E){this.targetWindow.postMessage({onirixEvent:e,params:E},this.onirixHost)},i.onMessageReceived=function(E){if(E.origin===this.onirixHost){var t=E.data;t&&t.onirixEvent&&(this.resolveConnect&&t.onirixEvent==e.HANDSHAKE_REPLY?this.resolveConnect():this.eventManager.triggerEvent(t.onirixEvent,t.params))}},i.subscribe=function(e,E){return this.eventManager.addEventListener(e,E)},i.unsubscribe=function(e){this.eventManager.removeEventListener(e)},i.enable=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1),this.sendMessage(E.ENABLE_ELEMENT,{oid:e,transition:t,time:n})},i.disable=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1),this.sendMessage(E.DISABLE_ELEMENT,{oid:e,transition:t,time:n})},i.toggle=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1),this.sendMessage(E.TOGGLE_ELEMENT,{oid:e,transition:t,time:n})},i.enableAll=function(){this.sendMessage(E.ENABLE_ALL)},i.disableAll=function(){this.sendMessage(E.DISABLE_ALL)},i.play=function(e){this.sendMessage(E.PLAY,{oid:e})},i.pause=function(e){this.sendMessage(E.PAUSE,{oid:e})},i.translate=function(e,t,n,i,s,o){this.sendMessage(E.TRANSLATE_ELEMENT,{oid:e,x:t,y:n,z:i,time:s,loop:o})},i.translateToPosition=function(e,t,n,i,s,o){this.sendMessage(E.SET_ELEMENT_POSITION,{oid:e,target:{x:t,y:n,z:i},time:s,lookAt:o})},i.translateToElement=function(e,t,n,i,s){this.sendMessage(E.SET_ELEMENT_POSITION,{oid:e,target:t,time:n,lookAt:i,loop:s})},i.rotate=function(e,t,n,i,s,o){this.sendMessage(E.ROTATE_ELEMENT,{oid:e,x:t,y:n,z:i,time:s,loop:o})},i.scale=function(e,t,n,i,s,o){this.sendMessage(E.SCALE_ELEMENT,{oid:e,x:t,y:n,z:i,time:s,loop:o})},i.playAnimation=function(e,t,n){this.sendMessage(E.PLAY_ANIMATION,{oid:e,animation:t,loop:n})},i.stopAnimation=function(e,t){this.sendMessage(E.STOP_ANIMATION,{oid:e,animation:t})},i.setLabelText=function(e,t){this.sendMessage(E.SET_LABEL_TEXT,{oid:e,text:t})},n}();n.Events=e,n.Actions=E;export{n as default};
